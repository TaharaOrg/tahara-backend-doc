"use strict";(self.webpackChunktahara_backend_doc=self.webpackChunktahara_backend_doc||[]).push([[263],{7758:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Overviews/Country","title":"Country Model","description":"Simplified Overview","source":"@site/docs/Overviews/Country.md","sourceDirName":"Overviews","slug":"/Overviews/Country","permalink":"/tahara-backend-doc/docs/Overviews/Country","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Overviews/Country.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Doctor Model","permalink":"/tahara-backend-doc/docs/Overviews/Doctor"},"next":{"title":"System Workflows","permalink":"/tahara-backend-doc/docs/workflows"}}');var i=s(4848),t=s(8453);const a={},d="Country Model",l={},c=[{value:"Simplified Overview",id:"simplified-overview",level:2},{value:"What is its function?",id:"what-is-its-function",level:2},{value:"Fields",id:"fields",level:2},{value:"Business Logic and Special Methods (Backend)",id:"business-logic-and-special-methods-backend",level:2},{value:"Translation System",id:"translation-system",level:3},{value:"Tax Compliance System",id:"tax-compliance-system",level:3},{value:"Mobile Communication Support",id:"mobile-communication-support",level:3},{value:"Data Integrity Features",id:"data-integrity-features",level:3},{value:"Relationships",id:"relationships",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"country-model",children:"Country Model"})}),"\n",(0,i.jsx)(n.h2,{id:"simplified-overview",children:"Simplified Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Think of the ",(0,i.jsx)(n.strong,{children:"Country Model"})," as the geographical foundation that powers location-based features throughout the app. It's like having a smart world map that not only knows country names in multiple languages, but also understands tax rules, currency systems, and phone number formats."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Localization support"}),": Country names appear in both Arabic and English based on user preference"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tax calculation"}),": Knows which countries require tax calculations for e-commerce features"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Communication formatting"}),": Stores mobile codes for proper international phone number handling"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Currency awareness"}),": Links countries to their currencies for financial features"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User profiling"}),": Helps personalize app experience based on geographical location"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Think of it as your international assistant that handles all the complex geographical and regulatory details."}),"\n",(0,i.jsx)(n.h2,{id:"what-is-its-function",children:"What is its function?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," The Country model serves as the comprehensive geographical reference system that manages international localization, tax compliance, currency handling, and mobile communication formatting across the global user base."]}),"\n",(0,i.jsx)(n.h2,{id:"fields",children:"Fields"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bigint"})}),(0,i.jsx)(n.td,{children:"Primary key - unique identifier for each country"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"name"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"varchar(255)"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"Default country name"})," - Primary name, typically in Arabic."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"name_en"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"varchar(255)"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," English country name used for localization. Nullable."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"code"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"varchar(2)"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," ISO 3166-1 alpha-2 country code (e.g., 'SA', 'US', 'EG')."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"mobile_code"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"varchar(255)"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," International dialing code (e.g., '+966', '+1', '+20')."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"currency"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"varchar(255)"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," National currency name (e.g., 'Saudi Riyal', 'US Dollar')."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"is_taxable"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tinyint"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," Tax requirement flag (",(0,i.jsx)(n.code,{children:"0"})," = no, ",(0,i.jsx)(n.code,{children:"1"})," = yes). Defaults to ",(0,i.jsx)(n.code,{children:"0"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"created_at"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"timestamp"})}),(0,i.jsx)(n.td,{children:"Record creation timestamp."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"updated_at"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"timestamp"})}),(0,i.jsx)(n.td,{children:"Record last update timestamp."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"deleted_at"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"timestamp"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," Soft deletion timestamp for data integrity."]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"business-logic-and-special-methods-backend",children:"Business Logic and Special Methods (Backend)"}),"\n",(0,i.jsx)(n.h3,{id:"translation-system",children:"Translation System"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," Smart country name localization with user preference detection:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"translateName()"})}),": Advanced computed attribute that provides localized country names"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multi-source language detection"}),": Checks authenticated user language, then request headers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Automatic fallback"}),": Gracefully handles missing language preferences"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Example: Smart language detection\nif (Auth::user()) {\n    if (Auth::user()->lang == 'ar') {\n        return $this->getTranslation('name', 'ar');\n    } else {\n        return $this->getTranslation('name', 'en');\n    }\n} else {\n    if (request()->header('lang') == 'ar') {\n        return $this->getTranslation('name', 'ar');\n    } else {\n        return $this->getTranslation('name', 'en');\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tax-compliance-system",children:"Tax Compliance System"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," E-commerce tax calculation framework:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tax jurisdiction identification"}),": ",(0,i.jsx)(n.code,{children:"is_taxable"})," flag determines tax calculation requirements"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Saudi Arabia special case"}),": Only Saudi Arabia is marked as taxable (VAT compliance)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"StoreService integration"}),": Used by StoreService to determine if customer country requires tax"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"mobile-communication-support",children:"Mobile Communication Support"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," International phone number handling:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Standardized mobile codes"}),": All stored with '+' prefix for consistency"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation support"}),": Used in user registration and profile updates"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"International compatibility"}),": Supports global user base with proper formatting"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"data-integrity-features",children:"Data Integrity Features"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"(Backend)"})," Robust data management:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Soft deletes"}),": Uses ",(0,i.jsx)(n.code,{children:"SoftDeletes"})," trait for data preservation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unique constraints"}),": Country code must be unique for data integrity"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Comprehensive seeding"}),": Includes 100+ countries with full data"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"relationships",children:"Relationships"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Users"})," (hasMany): ",(0,i.jsx)(n.a,{href:"/tahara-backend-doc/docs/Overviews/User",children:"User model"})," - Users who belong to this country for localization and tax purposes"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);